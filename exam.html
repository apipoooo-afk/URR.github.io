<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö | ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏∏‡∏ö‡∏•‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏±‡∏Å‡∏©‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏ö‡∏≤‡∏•</title>

  <link rel="stylesheet" href="assets/style.css"> 
  <link rel="stylesheet" href="exam.css"> 

  <style>
    :root {
      /* ‡πÇ‡∏ó‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞: ‡∏ä‡∏°‡∏û‡∏π‡∏´‡∏•‡∏±‡∏Å + ‡∏ü‡πâ‡∏≤ + ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß */
      --pink-main: #d63384;
      --pink-soft: #f8d7ec;
      --blue-main: #0d6efd;
      --green-main: #20c997;
      --bg-soft: #fff7fb;
      --card-bg: #ffffff;
    }

    * { box-sizing: border-box; }

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background:
        radial-gradient(circle at top left, #ffe0f3 0%, transparent 45%),
        radial-gradient(circle at top right, #e0f2ff 0%, transparent 50%),
        radial-gradient(circle at bottom, #e7fff4 0%, #f9fafb 60%);
      color: #212529;
    }

    /* HEADER (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: linear-gradient(120deg, #d63384, #0d6efd, #20c997);
      color: white;
      padding: 10px 12px 6px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.18);
    }

    .header-main {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 6px;
      flex-wrap: wrap;
    }

    .logo {
      height: 48px;
      width: 48px;
      border-radius: 50%;
      background: white;
      padding: 4px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.25);
      object-fit: contain;
    }

    .header-text h1 {
      margin: 0 0 2px;
      font-size: 22px;
    }
    .header-text p {
      margin: 0;
      font-size: 13px;
      opacity: 0.96;
    }

    /* NAV (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) */
    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      justify-content: center;
      margin-bottom: 4px;
    }
    nav a {
      color: white;
      text-decoration: none;
      padding: 4px 9px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: bold;
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(6px);
      border: 1px solid rgba(255,255,255,0.25);
      transition: all 0.2s ease;
    }
    nav a:hover {
      background: white;
      color: #d63384;
      transform: translateY(-1px);
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }

    /* LOGIN BAR (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) */
    .top-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
      padding: 4px 0 4px;
      border-top: 1px solid rgba(255,255,255,0.25);
    }
    .top-bar input {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.7);
      font-size: 12px;
      min-width: 120px;
    }
    .top-bar button {
      border-radius: 999px;
      border: none;
      padding: 4px 10px;
      font-size: 12px;
      cursor: pointer;
      background: #ffffff;
      color: #d63384;
      font-weight: bold;
      box-shadow: 0 2px 5px rgba(0,0,0,0.12);
      transition: all 0.2s ease;
    }
    .top-bar button:hover {
      transform: translateY(-1px);
      background: #ffe0f3;
    }
    .login-status {
      font-size: 11px;
      opacity: 0.9;
    }

    main {
      padding: 16px 14px 40px;
      max-width: 1200px;
      margin: auto;
    }

    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏õ‡∏∏‡πà‡∏°‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) */
    .back-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      border-radius: 999px;
      padding: 3px 9px;
      font-size: 11px;
      border: 1px solid #ffb3d5;
      background: #ffe0f3;
      color: #1f2933;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition: all 0.2s ease;
    }
    .back-btn:hover {
      background: #ffcfe9;
      transform: translateY(-1px);
    }
    
    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏õ‡∏∏‡πà‡∏° (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) */
    .btn {
      display: inline-block;
      padding: 8px 18px;
      background: linear-gradient(135deg, #20c997, #0d6efd);
      color: white;
      text-decoration: none;
      font-size: 13px;
      border-radius: 999px;
      margin: 3px;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(32,201,151,0.35);
      transition: all 0.2s ease;
    }
    .btn:hover {
      transform: translateY(-1px) scale(1.01);
      box-shadow: 0 6px 14px rgba(32,201,151,0.50);
    }
    .btn-secondary {
      background: linear-gradient(135deg, #d63384, #0d6efd);
      box-shadow: 0 4px 10px rgba(214,51,132,0.35);
    }
    .btn-secondary:hover {
      box-shadow: 0 6px 14px rgba(214,51,132,0.5);
    }

    /* SECTION ‡∏ó‡∏µ‡πà‡∏•‡πá‡∏≠‡∏Å (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) */
    .locked {
      position: relative;
      filter: blur(1px) grayscale(0.2);
      pointer-events: none;
      opacity: 0.7;
    }
    .locked::before {
      content: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö";
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(15,23,42,0.70);
      color: #e5e7eb;
      font-weight: bold;
      font-size: 14px;
      text-align: center;
      padding: 0 20px;
      z-index: 5;
    }
    
    /* CHAT WIDGET (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) */
    #chat-widget {
      position: fixed;
      bottom: 16px;
      right: 16px;
      z-index: 999;
      font-size: 13px;
    }
    #chat-toggle-btn {
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #d63384, #0d6efd, #20c997);
      color: white;
      padding: 10px 14px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.25);
      display: flex;
      align-items: center;
      gap:6px;
    }
    #chat-panel {
      width: 280px;
      max-height: 360px;
      background:white;
      border-radius: 14px;
      box-shadow: 0 8px 22px rgba(15,23,42,0.45);
      margin-top: 8px;
      display: none;
      flex-direction: column;
      overflow: hidden;
    }
    #chat-header {
      background: linear-gradient(135deg,#d63384,#0d6efd);
      color: white;
      padding: 8px 10px;
      font-size: 13px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #chat-messages {
      flex: 1;
      padding: 8px;
      overflow-y: auto;
      background:#f9fafb;
    }
    .chat-msg {
      margin-bottom: 6px;
      max-width: 90%;
      padding: 6px 8px;
      border-radius: 10px;
      line-height: 1.3;
      white-space: pre-wrap;
    }
    .chat-msg.user {
      background:#0d6efd;
      color:white;
      margin-left:auto;
      border-bottom-right-radius:2px;
    }
    .chat-msg.ai {
      background:white;
      color:#111827;
      border-bottom-left-radius:2px;
      border:1px solid #e5e7eb;
    }
    #chat-input-row {
      padding: 6px;
      border-top: 1px solid #e5e7eb;
      display: flex;
      gap: 4px;
    }
    #chat-input {
      flex:1;
      border-radius:999px;
      border:1px solid #d1d5db;
      padding: 4px 8px;
      font-size: 12px;
    }
    #chat-send-btn {
      border-radius:999px;
      border:none;
      padding: 4px 10px;
      background:#20c997;
      color:white;
      font-size:12px;
      cursor:pointer;
    }

    footer {
      text-align: center;
      padding: 12px;
      background-color: #1f1f2d;
      color: white;
      margin-top: 8px;
      font-size: 12px;
    }
    
    @media (max-width: 768px) {
      main {
        padding: 12px 8px 28px;
      }
      .back-btn {
        position: static;
        margin-bottom: 6px;
      }
      #chat-panel {
        width: 90vw;
      }
    }
  </style>
</head>
<body id="top">

  <header>
    <div class="header-main">
      <img src="https://www.urrschool.com/favicon.ico" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏∏‡∏ö‡∏•‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏±‡∏Å‡∏©‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏ö‡∏≤‡∏•" class="logo">
      <div class="header-text">
        <h1>‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏∏‡∏ö‡∏•‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏±‡∏Å‡∏©‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏ö‡∏≤‡∏•</h1>
        <p>‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• ‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£ ‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏™‡∏∏‡∏Ç ‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</p>
      </div>
    </div>

    <nav>
      <a href="index.html#menu-overview">‡πÄ‡∏°‡∏ô‡∏π‡∏£‡∏ß‡∏°</a>
      <a href="index.html#home">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
      <a href="index.html#register-section">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a>
      <a href="index.html#courses-summary">‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£</a>
      
      <a href="#top" style="background:white; color:#d63384;">‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</a> 
      
      <a href="index.html#student-status">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</a>
      <a href="index.html#certificates">‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</a>
      <a href="index.html#students-db" id="studentsDbNav" style="display:none;">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a>
      <a href="index.html#jobs">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏ß‡πà‡∏≤‡∏á</a>
      <a href="index.html#ai-knowledge" id="aiKnowledgeNav" style="display:none;">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö AI</a>
      <a href="index.html#admin-panel" id="adminNavLink" style="display:none;">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Admin/‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</a>
      <a href="index.html#about">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a>
      <a href="index.html#contact">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
    </nav>

    <div class="top-bar">
      <input type="text" id="loginUser" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ / ‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤">
      <input type="password" id="loginPass" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
      <button id="loginBtn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
      <button id="logoutBtn" style="display:none;">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
      <span class="login-status" id="loginStatus">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>
    </div>
  </header>

  <main>
  
    <section id="online-learning" class="exam-container locked">
      
      <button class="back-btn" onclick="goBack()">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button> 
      <h2><span class="icon">üìù</span>‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏î‡∏ú‡∏• (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)</h2>
    
      <div>
        <div class="question-block">
          <span>‡∏Ç‡πâ‡∏≠ 1.</span> ‡∏Å‡∏≤‡∏£‡∏õ‡∏ê‡∏°‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (First Aid) ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏≠‡∏∞‡πÑ‡∏£?
        </div>
    
        <div class="answer-options">
          <button class="option" onclick="selectAnswer(this)">
            ‡∏Å. ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡πÇ‡∏î‡∏¢‡πÅ‡∏û‡∏ó‡∏¢‡πå
          </button>
          <button class="option" onclick="selectAnswer(this)">
            ‡∏Ç. ‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏ö‡∏≤‡∏î‡πÄ‡∏à‡πá‡∏ö‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô ‡∏ì ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏
          </button>
          <button class="option" onclick="selectAnswer(this)">
            ‡∏Ñ. ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏™‡πà‡∏á‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÑ‡∏õ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•
          </button>
          <button class="option" onclick="selectAnswer(this)">
            ‡∏á. ‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡∏¢‡∏≤‡πÇ‡∏î‡∏¢‡πÄ‡∏†‡∏™‡∏±‡∏ä‡∏Å‡∏£
          </button>
        </div>
      </div>

      <div class="question-block">
        <span>‡∏Ç‡πâ‡∏≠ 2.</span> ‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏´‡∏°‡∏î‡∏™‡∏ï‡∏¥ ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÅ‡∏£‡∏Å?
      </div>
  
      <div class="answer-options">
        <button class="option" onclick="selectAnswer(this)">
          ‡∏Å. ‡πÇ‡∏ó‡∏£ 1669
        </button>
        <button class="option" onclick="selectAnswer(this)">
          ‡∏Ç. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        </button>
        <button class="option" onclick="selectAnswer(this)">
          ‡∏Ñ. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥ CPR ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        </button>
        <button class="option" onclick="selectAnswer(this)">
          ‡∏á. ‡∏´‡∏≤‡∏ô‡πâ‡∏≥‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏î‡∏∑‡πà‡∏°
        </button>
      </div>
    
      <div class="exam-nav">
        <button class="btn btn-secondary" disabled>‚Üê ‡∏Ç‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
        <span class="exam-progress">‡∏Ç‡πâ‡∏≠ 1-2 / 10</span>
        <button class="btn">‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
      </div>
      
      <div class="exam-results" style="display:none;">
        <h3>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h3>
        <p>‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ 8 / 10 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
        <a href="index.html#home" class="btn">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
      </div>
    
    </section>

  </main>

  <footer>
    <p>¬© 2025 ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏∏‡∏ö‡∏•‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏±‡∏Å‡∏©‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏ö‡∏≤‡∏• | ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà: 115/3 ‡∏´‡∏°‡∏π‡πà 4 ‡∏ï‡∏≥‡∏ö‡∏•‡∏Ç‡∏≤‡∏°‡πÉ‡∏´‡∏ç‡πà ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ 34000 | ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠: 080-459-3311</p>
  </footer>

  <div id="chat-widget">
    <button id="chat-toggle-btn">üí¨ ‡∏ñ‡∏≤‡∏°-‡∏ï‡∏≠‡∏ö‡∏Å‡∏±‡∏ö‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
    <div id="chat-panel">
      <div id="chat-header">
        <span>AI ‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</span>
        <button style="border:none;background:transparent;color:white;cursor:pointer;font-size:14px;" onclick="toggleChat(false)">‚úï</button>
      </div>
      <div id="chat-messages"></div>
      <div id="chat-input-row">
        <input type="text" id="chat-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...">
        <button id="chat-send-btn">‡∏™‡πà‡∏á</button>
      </div>
    </div>
  </div>

  <script>
    /* ----- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å SCRIPT ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å index.html ----- */
    const STORAGE_KEY_STUDENTS = "students";
    const STORAGE_KEY_USERS = "ubr_users";
    const STORAGE_KEY_CUR_USER = "ubr_current_user";
    const STORAGE_KEY_AI_KB = "ai_knowledge";

    const PERM_KEYS = [
      "onlineLearning",
      "studentStatus",
      "certificates",
      "studentsDb",
      "jobs"
    ];

    function goBack() {
      if (document.referrer && document.referrer !== location.href) {
        history.back();
      } else {
        // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ index
        location.href = "index.html"; 
      }
    }

    function safeSet(id, value) {
      const el = document.getElementById(id);
      if (el) el.textContent = value;
    }

    function getUsers() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY_USERS) || "[]";
        const arr = JSON.parse(raw);
        return Array.isArray(arr) ? arr : [];
      } catch {
        return [];
      }
    }

    function saveUsers(users) {
      localStorage.setItem(STORAGE_KEY_USERS, JSON.stringify(users));
    }

    function getCurrentUser() {
      const username = localStorage.getItem(STORAGE_KEY_CUR_USER);
      if (!username) return null;
      const users = getUsers();
      return users.find(u => u.username === username) || null;
    }

    function setCurrentUser(username) {
      if (!username) {
        localStorage.removeItem(STORAGE_KEY_CUR_USER);
      } else {
        localStorage.setItem(STORAGE_KEY_CUR_USER, username);
      }
    }

    function ensurePermissionsObject(user) {
      if (!user.permissions) {
        user.permissions = {
          onlineLearning: false,
          studentStatus: false,
          certificates: false,
          studentsDb: false,
          jobs: false
        };
      } else {
        PERM_KEYS.forEach(k => {
          if (typeof user.permissions[k] !== "boolean") {
            user.permissions[k] = false;
          }
        });
      }
      return user;
    }

    function countStatus(students, status) {
      return students.filter(s => s.status === status).length;
    }

    function refreshDashboard(students, views) {
      // ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ Dashboard ‡πÅ‡∏ï‡πà‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ
      // ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡πà‡∏≤ element ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
      safeSet("stat-views", views);
      safeSet("stat-registered", students.length);
      safeSet("stat-learning", countStatus(students, "learning"));
      safeSet("stat-intern", countStatus(students, "intern"));
      safeSet("stat-graduated", countStatus(students, "graduated"));
      safeSet("stat-employed", countStatus(students, "employed"));

      if (students.length > 0) {
        const last = students[students.length - 1];
        safeSet("testingStudentName", (last.firstName || "") + " " + (last.lastName || ""));
        safeSet("testingStudentId", last.studentId || "[‡∏£‡∏´‡∏±‡∏™]");
        safeSet("testingStudentStatus", last.status || "new");
      }
    }

    function renderStudentsTable(students) {
      const tbody = document.getElementById("studentTableBody");
      if (!tbody) return; // ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ
      if (students.length === 0) {
        tbody.innerHTML = '<tr><td colspan="10">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</td></tr>';
        return;
      }
      tbody.innerHTML = students.map(s => `
        <tr>
          <td>${s.studentId || ""}</td>
          <td>${(s.firstName || "") + " " + (s.lastName || "")}</td>
          <td>${s.age || ""}</td>
          <td>${s.gender || ""}</td>
          <td>${s.education || ""}</td>
          <td>${s.phone || ""}</td>
          <td>${s.lineId || ""}</td>
          <td>${s.facebook || ""}</td>
          <td>${s.course || ""}</td>
          <td>${s.status || ""}</td>
        </tr>
      `).join("");
    }

    function renderAdminUserTable() {
      const tbody = document.getElementById("adminUserTableBody");
      if (!tbody) return; // ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ
      const users = getUsers();
      const current = getCurrentUser();

      if (!users.length) {
        tbody.innerHTML = '<tr><td colspan="8">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</td></tr>';
        return;
      }

      const isCurrentCreator = current && current.role === "creator";

      tbody.innerHTML = users.map(u => {
        ensurePermissionsObject(u);
        const isCreator = u.role === "creator";
        const disabledRole = (!isCurrentCreator || isCreator) ? "disabled" : "";
        const disabledPerm = (!current || (current.role !== "creator" && current.role !== "admin")) ? "disabled" : "";

        return `
          <tr data-username="${u.username}">
            <td>${u.username}</td>
            <td>${u.displayName || ""}</td>
            <td>
              <select class="role-select" ${disabledRole}>
                <option value="user" ${u.role === "user" ? "selected" : ""}>User</option>
                <option value="admin" ${u.role === "admin" ? "selected" : ""}>Admin</option>
                <option value="creator" ${u.role === "creator" ? "selected" : ""} disabled>Creator</option>
              </select>
            </td>
            <td style="text-align:center;">
              <input type="checkbox" class="perm-checkbox" data-perm="onlineLearning" ${u.permissions.onlineLearning ? "checked" : ""} ${disabledPerm}>
            </td>
            <td style="text-align:center;">
              <input type="checkbox" class="perm-checkbox" data-perm="studentStatus" ${u.permissions.studentStatus ? "checked" : ""} ${disabledPerm}>
            </td>
            <td style="text-align:center;">
              <input type="checkbox" class="perm-checkbox" data-perm="certificates" ${u.permissions.certificates ? "checked" : ""} ${disabledPerm}>
            </td>
            <td style="text-align:center%;">
              <input type="checkbox" class="perm-checkbox" data-perm="studentsDb" ${u.permissions.studentsDb ? "checked" : ""} ${disabledPerm}>
            </td>
            <td style="text-align:center;">
              <input type="checkbox" class="perm-checkbox" data-perm="jobs" ${u.permissions.jobs ? "checked" : ""} ${disabledPerm}>
            </td>
          </tr>
        `;
      }).join("");
    }

    function updateLockedSections() {
      const user = getCurrentUser();
      const isLoggedIn = !!user;
      const permissions = user ? ensurePermissionsObject(user).permissions : {};

      // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ section ‡∏ï‡πà‡∏≤‡∏á‡πÜ (‡∏ö‡∏≤‡∏á‡∏≠‡∏±‡∏ô‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô null ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ)
      const onlineSec = document.getElementById("online-learning");
      const statusSec = document.getElementById("student-status");
      const certSec = document.getElementById("certificates");
      const jobsSec = document.getElementById("jobs");
      const studentsDbSec = document.getElementById("students-db");
      const adminSec = document.getElementById("admin-panel");
      const aiKnowledgeSec = document.getElementById("ai-knowledge");

      const studentsDbNav = document.getElementById("studentsDbNav");
      const adminNavLink = document.getElementById("adminNavLink");
      const aiKnowledgeNav = document.getElementById("aiKnowledgeNav");

      function setLock(sec, allowed) {
        if (!sec) return; // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ section ‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡∏Å‡πá‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ
        if (allowed) sec.classList.remove("locked");
        else sec.classList.add("locked");
      }

      // ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö!
      setLock(onlineSec, isLoggedIn && permissions.onlineLearning); 
      
      // ‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ (‡πÄ‡∏ä‡πà‡∏ô statusSec) ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô null
      // ‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô setLock ‡∏à‡∏∞‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡πÄ‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î error
      setLock(statusSec, isLoggedIn && permissions.studentStatus);
      setLock(certSec, isLoggedIn && permissions.certificates);
      setLock(jobsSec, isLoggedIn && permissions.jobs);

      const canSeeDb = isLoggedIn && (user.role === "admin" || user.role === "creator") && permissions.studentsDb;
      if (studentsDbSec) {
        studentsDbSec.style.display = canSeeDb ? "block" : "none";
      }
      if (studentsDbNav) {
        studentsDbNav.style.display = canSeeDb ? "inline-block" : "none";
      }

      const isAdminOrCreator = isLoggedIn && (user.role === "admin" || user.role === "creator");
      if (adminSec) {
        if (isAdminOrCreator) {
          adminSec.classList.remove("locked");
        } else {
          adminSec.classList.add("locked");
        }
      }
      if (adminNavLink) {
        adminNavLink.style.display = isAdminOrCreator ? "inline-block" : "none";
      }

      if (aiKnowledgeSec) {
        if (isAdminOrCreator) {
          aiKnowledgeSec.classList.remove("locked");
        } else {
          aiKnowledgeSec.classList.add("locked");
        }
      }
      if (aiKnowledgeNav) {
        aiKnowledgeNav.style.display = isAdminOrCreator ? "inline-block" : "none";
      }

      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å)
      const loginStatus = document.getElementById("loginStatus");
      const loginBtn = document.getElementById("loginBtn");
      const logoutBtn = document.getElementById("logoutBtn");
      if (loginStatus) {
        if (!isLoggedIn) {
          loginStatus.textContent = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö";
        } else {
          const roleText = user.role === "creator" ? "Creator" :
                           user.role === "admin" ? "Admin" : "User";
          loginStatus.textContent = "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß (" + roleText + ")";
        }
      }
      if (loginBtn && logoutBtn) {
        loginBtn.style.display = isLoggedIn ? "none" : "inline-block";
        logoutBtn.style.display = isLoggedIn ? "inline-block" : "none";
      }

      // ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á admin ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏ß‡πâ‡πÄ‡∏ú‡∏∑‡πà‡∏≠
      renderAdminUserTable(); 
    }

    function attachConfirmToForm(formId, message) {
      const form = document.getElementById(formId);
      if (!form) return;
      form.addEventListener("submit", function (e) {
        const ok = confirm(message || "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?");
        if (!ok) {
          e.preventDefault();
        }
      }, { capture: true });
    }

    /* CHAT AI (‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢) */
    function toggleChat(forceOpen) {
      const panel = document.getElementById("chat-panel");
      if (!panel) return;
      if (typeof forceOpen === "boolean") {
        panel.style.display = forceOpen ? "flex" : "none";
        return;
      }
      panel.style.display = panel.style.display === "flex" ? "none" : "flex";
    }

    function addChatMessage(sender, text) {
      const box = document.getElementById("chat-messages");
      if (!box) return;
      const div = document.createElement("div");
      div.className = "chat-msg " + (sender === "user" ? "user" : "ai");
      div.textContent = text;
      box.appendChild(div);
      box.scrollTop = box.scrollHeight;
    }

    function aiAnswer(message) {
      const kb = (localStorage.getItem(STORAGE_KEY_AI_KB) || "").trim();
      const lowerMsg = message.toLowerCase();
      let reply = "";

      if (kb) {
        const lines = kb.split(/\n+/).filter(l => l.trim());
        let matched = null;
        for (const line of lines) {
          const l = line.toLowerCase();
          if (lowerMsg && l.includes(lowerMsg.split(" ")[0])) {
            matched = line;
            break;
          }
        }
        if (matched) {
          reply = "‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö AI:\n" + matched;
        }
      }

      if (!reply) {
        reply =
          "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏∞‡∏Ñ‡∏∞ üòä\n" +
          "‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏ó‡∏£ 080-459-3311 ‡∏Ñ‡πà‡∏∞";
      }

      setTimeout(() => addChatMessage("ai", reply), 300);
    }
    
    /* ----- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞ ----- */
    
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
    function selectAnswer(selectedButton) {
      // ‡πÄ‡∏≠‡∏≤ class 'selected' ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
      const optionsContainer = selectedButton.closest('.answer-options');
      if (!optionsContainer) return;
      
      optionsContainer.querySelectorAll('.option').forEach(btn => {
        btn.classList.remove('selected');
      });
      
      // ‡πÄ‡∏û‡∏¥‡πà‡∏° class 'selected' ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏Å‡∏î
      selectedButton.classList.add('selected');
    }
    

    /* ----- ‡∏à‡∏ö‡∏™‡πà‡∏ß‡∏ô SCRIPT ‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏°‡∏≤ ----- */
    

    // DOMContentLoaded: ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà Script ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î
    document.addEventListener("DOMContentLoaded", function() {
      // ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏±‡∏ö views ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏´‡∏•‡∏î student data ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dashboard
      // ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏ä‡∏ó

      // **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î**
      updateLockedSections(); 

      // ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô) ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ
      // JavaScript ‡∏à‡∏∞‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡πÄ‡∏≠‡∏á‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏´‡∏≤ ID ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ (‡πÄ‡∏ä‡πà‡∏ô if (regForm))

      // ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° Login/Logout (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å)
      const loginBtn = document.getElementById("loginBtn");
      const logoutBtn = document.getElementById("logoutBtn");

      if (loginBtn) {
        loginBtn.addEventListener("click", function() {
          const username = (document.getElementById("loginUser").value || "").trim();
          const password = (document.getElementById("loginPass").value || "").trim();
          if (!username || !password) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô");
            return;
          }
          if (!confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
            return;
          }

          let users = getUsers();

          if (users.length === 0) {
            const creator = {
              username,
              displayName: username,
              password,
              role: "creator",
              permissions: {
                onlineLearning: true,
                studentStatus: true,
                certificates: true,
                studentsDb: true,
                jobs: true
              }
            };
            users.push(creator);
            saveUsers(users);
            setCurrentUser(username);
            alert("‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å‡πÄ‡∏õ‡πá‡∏ô Creator ‡πÅ‡∏•‡πâ‡∏ß");
          } else {
            let user = users.find(u => u.username === username && u.password === password);
            if (!user) {
              user = {
                username,
                displayName: username,
                password,
                role: "user",
                permissions: {
                  onlineLearning: false,
                  studentStatus: false,
                  certificates: false,
                  studentsDb: false,
                  jobs: false
                }
              };
              users.push(user);
              saveUsers(users);
              alert("‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Admin ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á ‡πÜ");
            }
            setCurrentUser(username);
          }
          
          // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
          updateLockedSections(); 
        });
      }

      if (logoutBtn) {
        logoutBtn.addEventListener("click", function() {
          if (!confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
            return;
          }
          setCurrentUser(null);
          
          // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏≠‡∏≤‡∏ï‡πå (‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡πá‡∏≠‡∏Å)
          updateLockedSections(); 
        });
      }

      // ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin Panel ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ
      // ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö AI Knowledge Base ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ

      // ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Chat Widget (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)
      const chatToggleBtn = document.getElementById("chat-toggle-btn");
      if (chatToggleBtn) {
        chatToggleBtn.addEventListener("click", () => toggleChat());
      }
      const chatSendBtn = document.getElementById("chat-send-btn");
      const chatInput = document.getElementById("chat-input");
      if (chatSendBtn && chatInput) {
        chatSendBtn.addEventListener("click", () => {
          const msg = chatInput.value.trim();
          if (!msg) return;
          addChatMessage("user", msg);
          chatInput.value = "";
          aiAnswer(msg);
        });
        chatInput.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            e.preventDefault();
            chatSendBtn.click();
          }
        });
      }

      addChatMessage("ai", "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ üëã ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö\n‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡πà‡∏∞");
    });
  </script>

</body>
</html>
